{% extends "base.njk" %}

{% block content %}

    <section class="site-hero mt-4">
      <div class="container">
        <div class="row pb-5 single-brand">
          <div class="col-lg-2 px-1 brand-thumbnails">
            <div class="thumbnail">
              <img class="w-75" src="{{brandlogo}}" alt="project image">
            </div>
          </div>
          <div class="col-lg-8 pt-1 pb-3 px-xs-4 px-3 single-text">
            <h3 class="neutral100">
                {{title}}
            </h3>
            <p class="slogan fs-3">
                &#8220;{{slogan}}<strong>‚Äù</strong>
            </p>
            <p class="ltpale fs-2">
                {{description}}
            </p>
          </div>
          <div class="col-lg-2 px-1 py-2 d-flex flex-column brand-buttons">
            {% if page.fileSlug in ['osf-cafe', 'osf-live'] %}
              <a class="bbutton" href="{{ linkorder }}" target="_blank" alt="{{ linkorder }}">
                {{txtorder}}
                <span>
                  <svg width="36" height="35" viewBox="0 0 36 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M35.0976 17.7287C35.0976 8.12165 27.8511 0.916382 18.189 0.916382C-4.75832 0.916382 -4.75832 33.3401 18.189 34.541C27.8511 34.541 35.0976 27.3357 35.0976 17.7287Z" fill="#EEE3E3"/>
                    <path d="M21.4849 16.7397C19.6934 16.7397 18.3235 18.0858 18.3235 19.6242V20.2011H24.7517V19.6242C24.7517 17.9897 23.2764 16.7397 21.5903 16.7397H21.4849Z" fill="#472818"/>
                    <path d="M13.873 27.6183H29.2019V10.806H13.873V27.6183ZM25.9471 25.6092H17.0228V24.3404H25.9471V25.6092ZM15.7629 20.5338H17.0228V19.8994C17.0228 17.6789 18.7027 15.7756 20.8025 15.4584V14.0838H22.0624V15.4584C24.2673 15.7756 25.8422 17.6789 25.8422 19.8994V20.5338H27.1021V21.8027H15.6579V20.5338H15.7629Z" fill="#472818"/>
                    <path d="M12.6085 9.69182L20.3013 5.86118H7.44482V22.6735H12.6085V9.69182Z" fill="#472818"/>
                    <path d="M20.3015 7.3446L15.3567 9.817H20.3015V7.3446Z" fill="#472818"/>
                  </svg>

                </span>
              </a>

            {% else %}

              <a class="bbutton" href="{{ linkmenu }}" target="_blank" alt="{{ linkmenu }}">
                {{txtmenu}}
                <span>
                  <svg width="36" height="35" viewBox="0 0 36 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M35.0976 17.5751C35.0976 7.96812 27.8511 0.762848 18.189 0.762848C-4.75832 0.762848 -4.75832 33.1865 18.189 34.3874C27.8511 34.3874 35.0976 27.1822 35.0976 17.5751Z" fill="#EEE3E3"/>
                    <path d="M19.574 4.31248C19.574 3.41437 18.9005 2.74078 18.0023 2.74078C15.8693 2.74078 15.8693 5.77191 18.0023 5.88417C18.9005 5.88417 19.574 5.21059 19.574 4.31248Z" fill="#472818"/>
                    <path d="M22.9421 17.6719L19.2374 20.703C19.1252 20.703 18.9006 20.8153 18.7884 20.8153H13.2875C12.8384 20.8153 12.5016 20.4785 12.5016 20.1417C12.5016 19.6926 12.8384 19.3558 13.2875 19.3558H16.4308C17.329 19.3558 18.1148 18.57 18.0025 17.6719H9.91954C9.24596 18.4577 8.68464 19.4681 8.68464 20.5907L5.76578 23.5096C5.42899 23.8464 5.42899 24.2954 5.76578 24.52L8.90917 27.6634C9.24596 28.0002 9.69501 28.0002 9.91954 27.6634L12.8384 24.7445L19.6865 23.9587C19.7988 23.9587 19.911 23.9587 20.0233 23.8464L25.412 19.4681C25.9733 19.019 26.1978 18.3455 26.0855 17.6719H22.9421Z" fill="#472818"/>
                    <path d="M18.0023 5.88419C13.2873 5.88419 9.24577 8.91531 7.67407 13.1813H28.3306C26.8712 8.91531 22.7174 5.88419 18.0023 5.88419Z" fill="#472818"/>
                    <path d="M29.7905 14.6407H6.21505C5.76599 14.6407 5.4292 14.9775 5.4292 15.4266C5.4292 15.8757 5.76599 16.2124 6.21505 16.2124H29.7905C30.8008 16.2124 30.8008 14.753 29.7905 14.753V14.6407Z" fill="#472818"/>
                  </svg>

                </span>
              </a>
              <a class="bbutton" href="{{ linkorder }}" target="_blank" alt="{{ linkorder }}">
                {{txtorder}}
                <span>
                  <svg width="36" height="35" viewBox="0 0 36 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M35.0976 17.7287C35.0976 8.12165 27.8511 0.916382 18.189 0.916382C-4.75832 0.916382 -4.75832 33.3401 18.189 34.541C27.8511 34.541 35.0976 27.3357 35.0976 17.7287Z" fill="#EEE3E3"/>
                    <path d="M21.4849 16.7397C19.6934 16.7397 18.3235 18.0858 18.3235 19.6242V20.2011H24.7517V19.6242C24.7517 17.9897 23.2764 16.7397 21.5903 16.7397H21.4849Z" fill="#472818"/>
                    <path d="M13.873 27.6183H29.2019V10.806H13.873V27.6183ZM25.9471 25.6092H17.0228V24.3404H25.9471V25.6092ZM15.7629 20.5338H17.0228V19.8994C17.0228 17.6789 18.7027 15.7756 20.8025 15.4584V14.0838H22.0624V15.4584C24.2673 15.7756 25.8422 17.6789 25.8422 19.8994V20.5338H27.1021V21.8027H15.6579V20.5338H15.7629Z" fill="#472818"/>
                    <path d="M12.6085 9.69182L20.3013 5.86118H7.44482V22.6735H12.6085V9.69182Z" fill="#472818"/>
                    <path d="M20.3015 7.3446L15.3567 9.817H20.3015V7.3446Z" fill="#472818"/>
                  </svg>

                </span>
              </a>
            {% endif %}


          </div>
          
        </div>
      </div>     
    </section>

    <section class="site-counter" >
      <div class="container">
        <div class="row">

<!--content-->
          <div class="col-12 col-md-12 d-flex">
            
            <div class="col-md-4 brand-single py-5">
             {{content | safe}}
            </div>

            <div class="col-md-8 py-5">
              {% set currentSlug = page.fileSlug %} {# e.g., "kachori-kaka" #}

              {% for brand in brand.brands %}
                {% set brandSlug = brand.link | replace('/brands/', '') %}
                {% if brandSlug == currentSlug %}


                  {% if currentSlug == "osf-live" or currentSlug == "osf-cafe" %}
                    <!-- Single Brand Image -->
                    <div class="single-brand-image">
                      <img src="{{ brand.image }}" alt="{{ brand.name }}">
                    </div>
                  {% else %}
                    <!-- Gallery Grid -->
                    {% if brand.gallery %}
                      <div class="gallery-grid" id="galleryGrid">  
                        {% for item in brand.gallery %}
                          <div class="gallery-item" data-brand="{{ brand.name }}" data-description="{{ brand.description }}">
                            <img src="{{ item.img }}" alt="{{ item.caption }} - {{ item.alt or 'Gallery Image' }}" loading="lazy">
                            <div class="gallery-overlay">
                              <p>{{ item.alt }}</p>
                            </div>
                          </div>
                        {% endfor %}
                      </div>  
                    {% endif %}
                  {% endif %}
                {% endif %}
              {% endfor %}
            </div>
          </div>
        </div>
<!--pagination-->
        <div class="palebg col-12">
            {% if collections.basket %}
              <!-- Sort basket items by order field -->
              {% set sortedBasket = collections.basket | sort(attribute='data.order') %}

              <!-- Find current item and get neighbors -->
              {% set nextPost = null %}
              {% set previousPost = null %}

              {% for item in sortedBasket %}
                {% if item.url == page.url %}
                  <!-- Get previous item (already processed) -->
                  {% if loop.index0 > 0 %}
                    {% set previousPost = sortedBasket[loop.index0 - 1] %}
                  {% endif %}

                  <!-- Get next item -->
                  {% if loop.index0 < (sortedBasket | length - 1) %}
                    {% set nextPost = sortedBasket[loop.index0 + 1] %}
                  {% endif %}
                {% endif %}
              {% endfor %}

              <div class="site-project-single-action d-flex justify-content-between py-3">
                {% if previousPost %}
                <a href="{{previousPost.url}}">
                  <img class="rev" src="/assets/images/to-top.svg" alt="previous brand in OSF's Brand Basket">
                  <span class="link-area">
                    <span data-text="{{previousPost.data.title}}">
                      Previous Brand
                    </span>
                  </span>
                </a>
                {% endif %}

                {% if nextPost %}
                <a href="{{nextPost.url}}">
                  <span class="link-area">
                    <span data-text="{{nextPost.data.title}}">
                      Next Brand
                    </span>
                  </span>
                  <img src="/assets/images/to-top.svg" alt="next brand in OSF's Brand Basket">
                </a> 
                {% endif %} 
              </div>
            {% endif %}
          </div>
      </div>
    </section>
<!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightboxClose" aria-label="Close lightbox">&times;</button>
            <button class="lightbox-nav lightbox-prev" id="lightboxPrev" aria-label="Previous image">&#8249;</button>
            <button class="lightbox-nav lightbox-next" id="lightboxNext" aria-label="Next image">&#8250;</button>
            <img id="lightboxImage" src="" alt="">
            <div class="lightbox-info">
                <p id="lightboxDescription"></p>
                <span class="lightbox-counter"><span id="currentImage">1</span> / <span id="totalImages">1</span></span>
            </div>
        </div>
    </div>
{% endblock %}